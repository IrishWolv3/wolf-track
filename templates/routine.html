{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center mb-4">üê∫ Daily Routine Tracker</h1>
    <p class="text-center text-muted">Fuel the pack. Train like the wild. Survive the day.</p>

    <div class="row">
        {% for meal in meals %}
        <div class="col-md-3 mb-4">
            <div class="card shadow">
                <div class="card-header bg-secondary text-white">
                    <strong>{{ meal }}</strong>
                </div>
                <div class="card-body">
                    <!-- Log Meal Button -->
                    <form method="POST" action="{% url 'log_meal' %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline-dark w-100 mb-3">Log Meal</button>
                    </form>
                    <!-- Log Workout Button -->
                    <form method="POST" action="{% url 'log_workout' %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline-dark w-100">Log Workout</button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}

        <!-- Manually Add Snack Card -->
        <div class="col-md-3 mb-4">
            <div class="card shadow">
                <div class="card-header bg-secondary text-white">
                    <strong>Snack</strong>
                </div>
                <div class="card-body">
                    <!-- Log Snack Meal Button -->
                    <form method="POST" action="{% url 'log_meal' %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline-dark w-100 mb-3">Log Meal</button>
                    </form>
                    <!-- Log Workout Button -->
                    <form method="POST" action="{% url 'log_workout' %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline-dark w-100">Log Workout</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

        <!-- Calorie Intake Progress -->
        <div class="mt-5">
            <h4>Calorie Intake Progress</h4>
            <div class="progress">
                <div class="progress-bar bg-info" style="width: {{ calorie_percent|floatformat:0 }}%;">
                    {{ calorie_percent|floatformat:0 }}%
                </div>
            </div>
        </div>
        
        <!-- Calories Burned Progress -->
        <div class="mt-4">
            <h4>Calories Burned Progress</h4>
            <div class="progress">
                <div class="progress-bar bg-warning" style="width: {{ calories_burned_percent|floatformat:0 }}%;">
                    {{ calories_burned_percent|floatformat:0 }}%
                </div>
            </div>
        </div>
        
        <!-- Workouts Completed Progress -->
        <div class="mt-4">
            <h4>Workouts Completed üî•</h4>
            <div class="progress">
                <div class="progress-bar bg-success" style="width: {{ workout_percent|floatformat:0 }}%;">
                    {{ workout_percent|floatformat:0 }}%
                </div>
            </div>
        </div>

    <div class="text-center mt-5">
        <h2>üêæ Keep pushing. The pack is proud.</h2>
    </div>
</div>
{% endblock %}